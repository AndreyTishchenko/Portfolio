const json = [
  {
    "name": "Irish coffee",
    "img": "../assets/png-images/coffee/coffee-1.png",
    "description": "Fragrant black coffee with Jameson Irish whiskey and whipped milk",
    "price": "7.00",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Kahlua coffee",
    "img": "../assets/png-images/coffee/coffee-2.png",
    "description": "Classic coffee with milk and Kahlua liqueur under a cap of frothed milk",
    "price": "7.00",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Honey raf",
    "img": "../assets/png-images/coffee/coffee-3.png",
    "description": "Espresso with frothed milk, cream and aromatic honey",
    "price": "5.50",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Ice cappuccino",
    "img": "../assets/png-images/coffee/coffee-4.png",
    "description": "Cappuccino with soft thick foam in summer version with ice",
    "price": "5.00",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Espresso",
    "img": "../assets/png-images/coffee/coffee-5.png",
    "description": "Classic black coffee",
    "price": "4.50",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Latte",
    "img": "../assets/png-images/coffee/coffee-6.png",
    "description": "Espresso coffee with the addition of steamed milk and dense milk foam",
    "price": "5.50",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Latte macchiato",
    "img": "../assets/png-images/coffee/coffee-7.png",
    "description": "Espresso with frothed milk and chocolate",
    "price": "5.50",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Coffee with cognac",
    "img": "../assets/png-images/coffee/coffee-8.png",
    "description": "Fragrant black coffee with cognac and whipped cream",
    "price": "6.50",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Moroccan",
    "img": "../assets/png-images/tea/tea-1.png",
    "description": "Fragrant black tea with the addition of tangerine, cinnamon, honey, lemon and mint",
    "price": "4.50",
    "category": "tea",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Lemon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Ginger",
    "img": "../assets/png-images/tea/tea-2.png",
    "description": "Original black tea with fresh ginger, lemon and honey",
    "price": "5.00",
    "category": "tea",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Lemon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Cranberry",
    "img": "../assets/png-images/tea/tea-3.png",
    "description": "Invigorating black tea with cranberry and honey",
    "price": "5.00",
    "category": "tea",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Lemon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Sea buckthorn",
    "img": "../assets/png-images/tea/tea-4.png",
    "description": "Toning sweet black tea with sea buckthorn, fresh thyme and cinnamon",
    "price": "5.50",
    "category": "tea",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Lemon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Marble cheesecake",
    "img": "../assets/png-images/desserts/dessert-1.png",
    "description": "Philadelphia cheese with lemon zest on a light sponge cake and red currant jam",
    "price": "3.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Red velvet",
    "img": "../assets/png-images/desserts/dessert-2.png",
    "description": "Layer cake with cream cheese frosting",
    "price": "4.00",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Cheesecakes",
    "img": "../assets/png-images/desserts/dessert-3.png",
    "description": "Soft cottage cheese pancakes with sour cream and fresh berries and sprinkled with powdered sugar",
    "price": "4.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Creme brulee",
    "img": "../assets/png-images/desserts/dessert-4.png",
    "description": "Delicate creamy dessert in a caramel basket with wild berries",
    "price": "4.00",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Pancakes",
    "img": "../assets/png-images/desserts/dessert-5.png",
    "description": "Tender pancakes with strawberry jam and fresh strawberries",
    "price": "4.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Honey cake",
    "img": "../assets/png-images/desserts/dessert-6.png",
    "description": "Classic honey cake with delicate custard",
    "price": "4.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Chocolate cake",
    "img": "../assets/png-images/desserts/dessert-7.png",
    "description": "Cake with hot chocolate filling and nuts with dried apricots",
    "price": "5.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Black forest",
    "img": "../assets/png-images/desserts/dessert-8.png",
    "description": "A combination of thin sponge cake with cherry jam and light chocolate mousse",
    "price": "6.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  }
]

let tab = document.querySelectorAll('.menu_pages.active');
const tabs = document.querySelectorAll('.menu_pages')
const tabsbtn = document.querySelectorAll('.button_in_controller');
const reloadbtn = document.querySelector('.reload')
reloadbtn.addEventListener('click', clear);
reloadbtn.addEventListener('click', addAllCards);
const cards = document.querySelectorAll('.card_of_product');
const popup = document.querySelector('.popup')
popup.addEventListener('click', close_popup)
const radio_buttons = document.querySelectorAll('.size .radio_buttons');
const addatives = document.querySelectorAll('.additives .radio_buttons');
const closebtn = document.querySelector('.popup .close_btn')
let first_cost;
// console.log(tab)
console.log(radio_buttons);
console.log(addatives)
for (let i = 0; i < radio_buttons.length; i++) {
  radio_buttons[i].addEventListener('click', radio_buttons_changed)
}
for (let i = 0; i < addatives.length; i++) {
  addatives[i].addEventListener('click', addatives_changed)
}

function addatives_changed(event) {
  let elem = event.target.closest('.additives .radio_buttons');
  elem.classList.toggle('active')
  change_cost();
}

function radio_buttons_changed(event) {
  console.log("HELLLLOOOOOOOOOO!")
  for (let i = 0; i < radio_buttons.length; i++) {
    radio_buttons[i].classList.remove('active')
  }
  event.target.closest('.div_with_radio .radio_buttons').classList.add('active')
  change_cost();
}

console.log(closebtn)
closebtn.addEventListener('click', close_popup)

function change_cost(event){
  const cost  = document.querySelector('.cost')
  cost.textContent = first_cost;
  cost.textContent = cost.textContent.replace('$', '')
  number = Number(cost.textContent);
  console.log(number)
  for (let i = 0; i < radio_buttons.length; i++) {
    if (radio_buttons[i].classList[1] == 'active') {
        number = number + Number(radio_buttons[i].dataset.adding_cost)
    }   
  }

  for (let i = 0; i < radio_buttons.length; i++) {
    if (addatives[i].classList[1] == 'active') {
        number = number + Number(addatives[i].dataset.adding_cost)
    }   
  }
  
  cost.textContent = "$" + String(number.toFixed(2))
}

for (let i = 0; i < tab.length; i++) {
    if (tab[i].classList.contains('tea')) {
        reloadbtn.style.display = "none"
    }
}

init();
for (let i = 0; i < tabsbtn.length; i++) {
  tabsbtn[i].addEventListener('click', clear);
  tabsbtn[i].addEventListener('click', change_tab);
}

window.addEventListener('resize', clear);
window.addEventListener('resize', init);
function init() {
  clear();
  if (window.innerWidth > 768) {
    clear();
    // console.log(tab[0])
    // console.log(tab[0].classList[2])
    for (let i = 0; i < json.length; i++) {
      if (json[i].category == tab[0].classList[1]) {
        let card = document.createElement('div')
        card.addEventListener('click', open_popup)
        card.id = String(i);
        card.classList.add('card_of_product')
        let picture_block = document.createElement('div')
        picture_block.classList.add('block_for_picture')
        let img = document.createElement('img');
        img.src = json[i].img;
        img.alt = json[i].name;
        let discription_of_drink = document.createElement('div')
        discription_of_drink.classList.add('descroption_of_drink')
        let name_of_drink = document.createElement('h3')
        name_of_drink.textContent = json[i].name;
        let p = document.createElement('p');
        p.textContent = json[i].description
        p.classList.add('medium');
        p.classList.add('dark-text');
        let price = document.createElement('h3');
        price.textContent = json[i].price
        price.classList.add("price")
        card.append(picture_block, discription_of_drink, price);
        picture_block.append(img);
        discription_of_drink.append(name_of_drink, p);
        tab[0].append(card);
      }
    }
  }else{
    clear();
    let count = 4;
    for (let i = 0; i < json.length; i++) {
      if (count <= 0) {
        break
      }else{
        if (json[i].category == tab[1].classList[1]) {
          // console.log(tab[1]);
          let card = document.createElement('div')
          card.id = String(i);
          card.addEventListener('click', open_popup)
          card.classList.add('card_of_product')
          let picture_block = document.createElement('div')
          picture_block.classList.add('block_for_picture')
          let img = document.createElement('img');
          img.src = json[i].img;
          img.alt = json[i].name;
          let discription_of_drink = document.createElement('div')
          discription_of_drink.classList.add('descroption_of_drink')
          let name_of_drink = document.createElement('h3')
          name_of_drink.textContent = json[i].name;
          let p = document.createElement('p');
          p.textContent = json[i].description
          p.classList.add('medium');
          p.classList.add('dark-text');
          let price = document.createElement('h3');
          price.textContent = json[i].price
          price.classList.add("price")
          card.append(picture_block, discription_of_drink, price);
          picture_block.append(img);
          discription_of_drink.append(name_of_drink, p);
          tab[1].append(card);
          count--;
          reloadbtn.style.display = "block"
        }
      }
    }
  }
}

function clear() {
  console.log('yyyyyyy')
    for (let i = 0; i < tabs.length; i++) {
      tabs[i].innerHTML = ''
    }
}

function addAllCards() {
  for (let i = 0; i < json.length; i++) {
    if (json[i].category == tab[1].classList[1]) {
      // console.log(tab[1]);
      let card = document.createElement('div')
      card.id = String(i);
      card.classList.add('card_of_product')
      card.addEventListener('click', open_popup)
      let picture_block = document.createElement('div')
      picture_block.classList.add('block_for_picture')
      let img = document.createElement('img');
      img.src = json[i].img;
      img.alt = json[i].name;
      let discription_of_drink = document.createElement('div')
      discription_of_drink.classList.add('descroption_of_drink')
      let name_of_drink = document.createElement('h3')
      name_of_drink.textContent = json[i].name;
      let p = document.createElement('p');
      p.textContent = json[i].description
      p.classList.add('medium');
      p.classList.add('dark-text');
      let price = document.createElement('h3');
      price.textContent = json[i].price
      price.classList.add("price")
      card.append(picture_block, discription_of_drink, price);
      picture_block.append(img);
      discription_of_drink.append(name_of_drink, p);
      tab[1].append(card);
      reloadbtn.style.display = "none"
    } 
  }
}

function change_tab(event) {
  console.log('yyyyyy')
  let elem = event.target.closest('.button_in_controller');
  for (let i = 0; i < tabsbtn.length; i++) {
    tabsbtn[i].classList.remove('active')
  }
  elem.classList.add('active')

  let elems = document.querySelectorAll('.menu_pages.' + elem.classList[1]);
  console.log(tab)
  for (let i = 0; i < tab.length; i++) {
      tab[i].classList.remove('active')
  }
  
  // console.log(elems)
  for (let i = 0; i < elems.length; i++) {
    elems[i].classList.add('active')
  }

  tab = document.querySelectorAll('.menu_pages.active');
  console.log(tab)

  clear();
  init();
}

function open_popup(event){
  popup.classList.add('active')
  document.querySelector('body').style.overflow = "hidden";
  load_information(event.target.closest('.card_of_product'));
}

function close_popup(event) {
  if (event.target != popup && event.target != closebtn) {
      return false;
  }else{
      popup.classList.remove('active')
      document.querySelector('body').style.overflow = "auto";
  }
  console.log(event.target)
}

function load_information(element) {
  data = json[element.id];
  let i = 0;
  const name = document.querySelector('.describing-of-good .title_of_drink')
  name.textContent = data.name;
  const description_of_product= document.querySelector('.describing-of-good p')
  console.log(description_of_product)
  description_of_product.textContent = data.description;
  const img = document.querySelector('.firs_part_of_content .block_for_picture img')
  img.src = data.img;
  img.alt = data.name
  const cost  = document.querySelector('.cost')
  cost.textContent = "$" + data.price;
  first_cost = "$" + data.price;
  sizebtns = document.querySelectorAll('size_of_drink');
  radio_buttons_text = document.querySelectorAll('.div_with_radio .radio_buttons span');
  for (const key in data.sizes) {
    radio_buttons_text[i].textContent =  data.sizes[key].size;
    i++
  }
  const addatives_text = document.querySelectorAll('.additives .radio_buttons span')
  i = 0;
  for (const key in data.additives) {
    addatives_text[i].textContent =  data.additives[key].name;
    i++
  }
  console.log(data)
}
